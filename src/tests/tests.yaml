charm_name: vault
configure:
- zaza.openstack.charm_tests.vault.setup.basic_setup
dev_bundles:
- bionic
- groovy-mysql8
gate_bundles:
- xenial-ha-mysql
- xenial-postgres
- xenial-mysql
- bionic-postgres
- bionic-mysql
- focal-mysql8
smoke_bundles:
- bionic-mysql
target_deploy_status:
  easyrsa:
    workload-status-message: Certificate Authority connected.
  etcd:
    workload-status-message: Healthy
  postgresql:
    workload-status-message: Live
  vault:
    workload-status: blocked
    workload-status-message: Vault needs to be initialized
  ceph-osd:
    workload-status: waiting
    workload-status-message: "Incomplete relation: vault"
  ceph-mon:
    workload-status: waiting
    workload-status-message: "Monitor bootstrapped but waiting for number of OSDs to reach expected-osd-count (3)"
tests:
- zaza.openstack.charm_tests.vault.tests.VaultTest
tests_options:
  force_deploy:
    - groovy-mysql8
